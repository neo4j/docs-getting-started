[[data-modeling]]
= What is graph data modeling?
:description: graph-modeling, data-model, schema, create-model, translate-model, model-performance, model-example
:page-ad-overline-link: https://graphacademy.neo4j.com/courses/modeling-fundamentals/?ref=docs
:page-ad-overline: Neo4j GraphAcademy
:page-ad-title: Graph Data Modeling Fundamentals
:page-ad-description: Learn how to design a Neo4j graph using best practices
:page-ad-link: https://graphacademy.neo4j.com/courses/modeling-fundamentals/?ref=docs
:page-ad-underline-role: button
:page-ad-underline: Learn more

Data modeling is a practice that defines the logic of queries and the structure of the data in storage.
It is an important step to take when using any type of database, as it helps ensuring data integrity and improved performance.

This section gets you started with data modeling by introducing the concept, designs, tips, and how to migrate from relational to graph databases.

== How to create a graph data model

There are different ways to organize data into a model.
For example, using a whiteboard to show how different items are related is quite common when designing <<data models>>.

For a relational database, the model on the whiteboard must then be re-formatted and structured to fit normalized tables.
Graph data models, however, are _whiteboard-friendly_ since the data model stays the same as drawn on the whiteboard.

Take this example using data about the movie "The Matrix", also found in the xref:appendix/example-data.adoc[*Movies* example dataset]:

.Matrix - whiteboard model
image::matrix-whiteboard-model.png[500,500,role="popup-link"]

To add this information to a graph database and use xref:cypher.adoc[Cypher] as a query language, these entities need to be turned into <<nodes>> and their connections into <<relationships>>:

.Matrix - match node and relationship format of property graph model
image::matrix-whiteboard-model2.svg[500,500,role="popup-link"]

The next step is to add <<labels>> and determine <<properties>> for the nodes and relationships:

.Matrix - add labels and properties
image::matrix-whiteboard-model3.svg[500,500,role="popup-link"]

You can visualize the model in Neo4j Browser or Query.
First, write the data to the database using xref:cypher.adoc[Cypher]:

[source,cypher]
--
CREATE (p1:Person:Actor {name: "Tom Hanks"})-[:ACTED_IN]->(m1:Movie {title: "Cloud Atlas"})<-[:ACTED_IN]-(p2:Person:Actor {name: "Hugo Weaving"}),
(p2)-[:ACTED_IN]->(m2:Movie {title: "The Matrix"})<-[:DIRECTED]-(p3:Person:Director {name: "Lana Wachowski"}),
(p3)-[:DIRECTED]->(m1)
--

Then, use the following query to visualize the data you just wrote:

[source,cypher]
--
MATCH p=()-[:ACTED_IN]->()<-[:DIRECTED]-()
RETURN p
--

The visualization should look like this:

.Matrix - final model in Neo4j 
image::matrix-whiteboard-model4.svg[400,400,role="popup-link"]

[TIP]
====
If you are new to the Cypher query language, refer to xref:cypher.adoc[What is Cypher] for an introduction.
====

=== Domain description

It is easier to understand the process of designing a graph data model if you consider the domain.
As an example, consider the following scenario:

* Two _people_, *Sally* and *John*, +++<u>are friends</u>+++.
* Both *John* and *Sally* +++<u>have read</u>+++ the _book_ *Graph Databases*.

You can use this information to build a data model by identifying the components as labels, nodes, and relationships.
To add it to the graph, you can write the following Cypher statement:

[source,cypher]
--
CREATE (b:Book {name:'Graph Databases', author:'Jim Webber', author:'Ian Robinson'})<-[:HAS_READ {on:date("2013-03-02"), rated:5}]-(p1:Person {name:'John', age:27})-[:IS_FRIENDS_WITH {since:date("2013-09-01")}]->(p2:Person {name:'Sally', age:32})
--

And the visualization should look like this:

image::property_graph_elements-arr.svg[700,700,role="popup-link"]

In the model, you can see that:

* Nodes (circles) represent objects and people.
* Nodes can have properties (name/value pairs).
* Relationships (arrows) connect nodes and represent actions.
* Relationships are directional and can have properties (name/value pairs).

The domain in this example is, therefore, about people and books, and how they relate to each other.

=== Refactoring

Data models can be designed in different ways.
For instance, the same example used previously could have been modeled with John and Sally being two different nodes instead of having their names added as a property for the nodes labeled `Person`.

However, in case more people are added to the graph, it would make more sense to group John and Sally together into bigger categories, like `Person`, to make retrieving data easier.
Updating the way you organize your data (e.g. turning nodes into node properties) is called xref:data-modeling/graph-model-refactoring.adoc[refactoring] and the iterations are called versioning.

=== Design strategy

Neo4j is *schema-free*, which means that the data model can adapt as a project advances, making refactoring and versioning easier.
This allows developers and architects to have more flexibility when determining the structure of the data model and how to define entities for queries.

Datasets often have many things in common (for example, domains, objects, measurements), and there are existing strategies you can follow.
Refer to xref:data-modeling/modeling-designs.adoc[Modeling designs] for a more detailed explanation.

== Keep learning

For a more hands-on approach to data modeling, try the following resources:

// * xref:tutorials/tutorial-data-modeling.adoc[Tutorial: Create a graph data model]: a more in-depth tutorial that follows up to the example used here.
* link:https://graphacademy.neo4j.com/courses/modeling-fundamentals/?ref=docs[GraphAcademy: Data Modeling Fundamentals]: enroll to an interactive course.
* xref:data-modeling/relational-to-graph-modeling.adoc[From relational to graph]: learn how to adapt data from a relational to a graph data model.
* xref:data-modeling/data-modeling-tools.adoc[Data modeling tools]: see a list of tools you can use to create your data model.
* link:https://neo4j.com/graphgists/[Neo4j GraphGists]: find examples of graph data modeling shared by the Neo4j community.

ifndef::backend-pdf[]
[discrete.glossary]
endif::[]
== Glossary

include::../glossary.adoc[]

ifdef::backend-pdf[]
<<<
endif::[]