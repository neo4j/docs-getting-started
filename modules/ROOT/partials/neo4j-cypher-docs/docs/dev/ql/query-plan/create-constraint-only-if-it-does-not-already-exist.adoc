[[query-plan-create-constraint-only-if-it-does-not-already-exist]]
== Create Constraint only if it does not already exist ==
To not get an error creating the same constraint twice, we use the `DoNothingIfExists` operator for constraints.
This will make sure no other constraint with the given name or another constraint of the same type and schema already exists before the specific `CreateConstraint` operator creates the constraint.
If it finds a constraint with the given name or with the same type and schema it will stop the execution and no new constraint is created.
The following query will create a unique constraint with the name `uniqueness` on the `name` property of nodes with the `Country` label only if
no constraint named `uniqueness` or unique constraint on `(:Country {name})` already exists.

.Query
include::includes/query-plan-create-constraint-only-if-it-does-not-already-exist.query.adoc[]



.Query Plan
[source]
----
Compiler CYPHER 4.3

Planner ADMINISTRATION

Runtime SCHEMA

Runtime version 4.3

+--------------------------------+----------------------------------------------------------------+
| Operator                       | Details                                                        |
+--------------------------------+----------------------------------------------------------------+
| +CreateConstraint              | CONSTRAINT uniqueness ON (c:Country) ASSERT (c.name) IS UNIQUE |
| |                              +----------------------------------------------------------------+
| +DoNothingIfExists(CONSTRAINT) | CONSTRAINT uniqueness ON (c:Country) ASSERT (c.name) IS UNIQUE |
+--------------------------------+----------------------------------------------------------------+

Total database accesses: ?

----
