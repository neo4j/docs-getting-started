[[query-plan-varlength-expand-pruning]]
== VarLength Expand Pruning ==
Given a start node, the `VarLengthExpand(Pruning)` operator will traverse variable-length relationships much like the <<query-plan-varlength-expand-all, `VarLengthExpand(All)`>> operator.
However, as an optimization, some paths will not be explored if they are guaranteed to produce an end node that has already been found (by means of a previous path traversal).
This will only be used in cases where the individual paths are not of interest.
This operator guarantees that all the end nodes produced will be unique.

.Query
include::includes/query-plan-varlength-expand-pruning.query.adoc[]



.Query Plan
[source]
----
Compiler CYPHER 4.3

Planner COST

Runtime PIPELINED

Runtime version 4.3

+---------------------------+------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| Operator                  | Details                      | Estimated Rows | Rows | DB Hits | Memory (Bytes) | Page Cache Hits/Misses | Time (ms) | Other               |
+---------------------------+------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +ProduceResults           | p, q                         |              0 |    0 |       0 |                |                    0/0 |     0.028 | In Pipeline 1       |
| |                         +------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +Distinct                 | p, q                         |              0 |    0 |       0 |            224 |                    0/0 |     0.977 | In Pipeline 1       |
| |                         +------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +Filter                   | q:Person                     |              0 |    0 |       0 |                |                    0/0 |     0.059 | In Pipeline 1       |
| |                         +------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +VarLengthExpand(Pruning) | (p)-[:FRIENDS_WITH*3..4]-(q) |              0 |    0 |      32 |            896 |                        |           | In Pipeline 1       |
| |                         +------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +Filter                   | p:Person                     |             14 |   14 |       0 |                |                        |           | Fused in Pipeline 0 |
| |                         +------------------------------+----------------+------+---------+----------------+                        |           +---------------------+
| +AllNodesScan             | p                            |             35 |   35 |      36 |             72 |                    1/0 |     0.201 | Fused in Pipeline 0 |
+---------------------------+------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+

Total database accesses: 68, total allocated memory: 976

----
